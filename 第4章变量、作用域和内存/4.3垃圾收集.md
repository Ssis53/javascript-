# 第四章 变量、作用域和内存
## 4.3 垃圾收集机制
&nbsp;

### 4.3.1 标记清除
>JavaScript 中最常用的垃圾收集方式是标记清除（mark-and-sweep）。当变量进入环境（例如，在函
数中声明一个变量）时，就将这个变量标记为“进入环境”。从逻辑上讲，永远不能释放进入环境的变量所占用的内存，因为只要执行流进入相应的环境，就可能会用到它们。而当变量离开环境时，则将其
标记为“离开环境”。最后，垃圾收集器
完成内存清除工作，销毁那些带“离开环境”标记的值并回收它们所占用的内存空间。

<br/>

### 4.3.2 引用计数

>引用计数的含义是跟踪记录每
个值被引用的次数。当声明了一个变量并将一个引用类型值赋给该变量时，则这个值的引用次数就是1。
如果同一个值又被赋给另一个变量，则该值的引用次数加1。相反，如果包含对这个值引用的变量又取
得了另外一个值，则这个值的引用次数减1。当这个值的引用次数变成0 时，则说明没有办法再访问这
个值了，因而就可以将其占用的内存空间回收回来。这样，当垃圾收集器下次再运行时，它就会释放那
>些引用次数为零的值所占用的内存。
>
>**循环引用的变量会有问题**

<br/>

### 4.3.4 管理内存

一旦数据不再有用，最好通过将其值设置为null或undefined 来释放其引用——这个
做法叫做解除引用（dereferencing）。这一做法适用于大多数全局变量和全局对象的属性。局部变量会在
它们离开执行环境时自动被解除引用。

**不过，解除一个值的引用并不意味着马上回收该值所占用的内存。解除引用的真正作用是让值脱离
执行环境，以便垃圾收集器下次运行时将其回收。**
